var that=this;function __skpm_run(e,t){that.context=t;var n=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/settings.js")}({"./src/jsaes.js":
/*!**********************!*\
  !*** ./src/jsaes.js ***!
  \**********************/
/*! exports provided: AES_Encrypt_String, AES_Decrypt_String */function(e,n,i){"use strict";i.r(n),i.d(n,"AES_Encrypt_String",function(){return g}),i.d(n,"AES_Decrypt_String",function(){return S});var r,a,o,l,s=!0;function c(){if(s){var e=t.plugin.urlForResourceNamed("secret.txt").path(),n=NSString.stringWithContentsOfFile(e);if(console.log("The key"),console.log(n),n.length()<1){console.log("Key not found, creating key"),n="";for(var i=0;i<64;i++)n+="0123456789ABCDEF"[Math.floor(16*Math.random())];(n=NSString.alloc().initWithString(n)).dataUsingEncoding(NSString.NSUTF8StringEncoding).writeToFile_atomically(e,!1)}else console.log("Key was found");s=!1,r=new Array(256);for(i=0;i<256;i++)r[f[i]]=i;a=new Array(16);for(i=0;i<16;i++)a[h[i]]=i;o=new Array(256);for(i=0;i<128;i++)o[i]=i<<1,o[128+i]=i<<1^27;l=new Array(16);for(i=0;i<16;++i)l[i]=Number(n.charCodeAt(i));!function(e){var t,n=e.length,i=1;switch(n){case 16:t=176;break;case 24:t=208;break;case 32:t=240;break;default:throw"AES_ExpandKey: Only key lengths of 16, 24 or 32 bytes allowed!"}for(var r=n;r<t;r+=4){var a=e.slice(r-4,r);r%n==0?(a=new Array(f[a[1]]^i,f[a[2]],f[a[3]],f[a[0]]),(i<<=1)>=256&&(i^=283)):n>24&&r%n==16&&(a=new Array(f[a[0]],f[a[1]],f[a[2]],f[a[3]]));for(var o=0;o<4;o++)e[r+o]=e[r+o-n]^a[o]}}(l)}}function u(e,t){var n=t.length;p(e,t.slice(0,16));for(var i=16;i<n-16;i+=16)v(e,f),y(e,h),w(e),p(e,t.slice(i,i+16));v(e,f),y(e,h),p(e,t.slice(i,n))}function d(e,t){var n=t.length;p(e,t.slice(n-16,n)),y(e,a),v(e,r);for(var i=n-32;i>=16;i-=16)p(e,t.slice(i,i+16)),N(e),y(e,a),v(e,r);p(e,t.slice(0,16))}function g(e){c();for(var t,n=[],i=0;i<e.length;i+=16){t=new Array(16);for(var r=0;r<16;++r)t[r]=Number(e.charCodeAt(r+i));u(t,l),n.push(t)}return n}function S(e){c();for(var t,n="",i=0;i<e.length;++i){d(t=e[i],l);for(var r=0;r<16;++r)0!=t[r]&&(n+=String.fromCharCode(t[r]))}return n}var f=new Array(99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22),h=new Array(0,5,10,15,4,9,14,3,8,13,2,7,12,1,6,11);function v(e,t){for(var n=0;n<16;n++)e[n]=t[e[n]]}function p(e,t){for(var n=0;n<16;n++)e[n]^=t[n]}function y(e,t){for(var n=(new Array).concat(e),i=0;i<16;i++)e[i]=n[t[i]]}function w(e){for(var t=0;t<16;t+=4){var n=e[t+0],i=e[t+1],r=e[t+2],a=e[t+3],l=n^i^r^a;e[t+0]^=l^o[n^i],e[t+1]^=l^o[i^r],e[t+2]^=l^o[r^a],e[t+3]^=l^o[a^n]}}function N(e){for(var t=0;t<16;t+=4){var n=e[t+0],i=e[t+1],r=e[t+2],a=e[t+3],l=n^i^r^a,s=o[l],c=o[o[s^n^r]]^l,u=o[o[s^i^a]]^l;e[t+0]^=c^o[n^i],e[t+1]^=u^o[i^r],e[t+2]^=c^o[r^a],e[t+3]^=u^o[a^n]}}},"./src/settings.js":
/*!*************************!*\
  !*** ./src/settings.js ***!
  \*************************/
/*! exports provided: check_settings_are_right, set_settings, check_settings_exist, default */function(e,t,n){"use strict";n.r(t),n.d(t,"check_settings_are_right",function(){return c}),n.d(t,"set_settings",function(){return u}),n.d(t,"check_settings_exist",function(){return d});var i=n(/*! ./jsaes */"./src/jsaes.js"),r=n(/*! sketch/settings */"sketch/settings"),a=function e(t){var n=COSAlertWindow.new();switch(n.setIcon(NSImage.alloc().initByReferencingFile(t.plugin.urlForResourceNamed("icon.png").path())),n.setMessageText("Configure Pull Strings git access and files"),n.addButtonWithTitle("done"),n.addButtonWithTitle("Github API token"),n.addButtonWithTitle("remove files"),n.addButtonWithTitle("add file"),n.runModal()){case 1e3:break;case 1001:o(t),e(t);break;case 1002:s(t),e(t);break;case 1003:l(t),e(t)}},o=function(e){var t=COSAlertWindow.new();t.setIcon(NSImage.alloc().initByReferencingFile(e.plugin.urlForResourceNamed("icon.png").path())),t.setMessageText("Configure Git Access"),t.setInformativeText("Create an API token by visiting https://github.com/settings/tokens and assign the scope repo to it."),t.addButtonWithTitle("save"),t.addButtonWithTitle("cancel");var n=NSView.alloc().initWithFrame(NSMakeRect(0,0,400,140));t.addAccessoryView(n);var a=NSTextField.alloc().initWithFrame(NSMakeRect(-1,75,190,20));a.setStringValue("token"),a.setSelectable(!1),a.setEditable(!1),a.setBezeled(!1),a.setDrawsBackground(!1);var o=NSSecureTextField.alloc().initWithFrame(NSMakeRect(0,55,330,20));n.addSubview(o),n.addSubview(a),1e3==t.runModal()&&(r.setSettingForKey("git-token",Object(i.AES_Encrypt_String)(o.stringValue()+"")),r.setSettingForKey("settings-exist",!0))},l=function(e){var t=NSWindow.alloc().init();t.setTitle("Add file");var n=t.contentView();t.setFrame_display(NSMakeRect(0,155,400,240),!1);var i=NSImage.alloc().initByReferencingFile(e.plugin.urlForResourceNamed("icon.png").path()),a=NSImageView.alloc().initWithFrame(NSMakeRect(10,140,60,60));a.setImage(i),n.addSubview(a);var o=NSTextField.alloc().initWithFrame(NSMakeRect(90,175,190,20));o.setStringValue("file owner"),o.setSelectable(!1),o.setEditable(!1),o.setBezeled(!1),o.setDrawsBackground(!1);var l=NSTextField.alloc().initWithFrame(NSMakeRect(90,155,130,20)),s=NSTextField.alloc().initWithFrame(NSMakeRect(230,175,190,20));s.setStringValue("repository"),s.setSelectable(!1),s.setEditable(!1),s.setBezeled(!1),s.setDrawsBackground(!1);var c=NSTextField.alloc().initWithFrame(NSMakeRect(230,155,130,20)),u=NSTextField.alloc().initWithFrame(NSMakeRect(90,135,190,20));u.setStringValue("path"),u.setSelectable(!1),u.setEditable(!1),u.setBezeled(!1),u.setDrawsBackground(!1);var d=NSTextField.alloc().initWithFrame(NSMakeRect(90,110,270,20)),g=NSTextField.alloc().initWithFrame(NSMakeRect(20,60,360,40));g.setStringValue("When you visit the file on github.com the URL looks like this https://github.com/{owner}/{repo}/blob/master/{path}"),g.setSelectable(!1),g.setEditable(!1),g.setBezeled(!1),g.setDrawsBackground(!1),n.addSubview(g),l.setNextKeyView_(c),c.setNextKeyView(d),n.addSubview(g),n.addSubview(l),n.addSubview(o),n.addSubview(c),n.addSubview(s),n.addSubview(d),n.addSubview(u);var S=0,f=NSButton.alloc().initWithFrame(NSMakeRect(290,20,80,25));f.setTitle("save"),f.setBezelStyle(NSRoundedBezelStyle),f.setKeyEquivalent("\r"),f.setCOSJSTargetFunction(function(e){S=1e3,t.orderOut(null),NSApp.stopModal()}),n.addSubview(f);var h=NSButton.alloc().initWithFrame(NSMakeRect(180,20,80,25));if(h.setTitle("cancel"),h.setBezelStyle(NSRoundedBezelStyle),h.setKeyEquivalent("\b"),h.setCOSJSTargetFunction(function(e){S=1001,t.orderOut(null),NSApp.stopModal()}),n.addSubview(h),NSApp.runModalForWindow(t),1e3==S){console.log("###### Adding File ######"),console.log("".concat(l.stringValue(),":").concat(c.stringValue(),":").concat(d.stringValue()));var v=r.settingForKey("files")||[];v.push([l.stringValue(),c.stringValue(),d.stringValue()]),r.setSettingForKey("files",v)}t=null,f=null,h=null},s=function(e){var t=COSAlertWindow.new();t.setIcon(NSImage.alloc().initByReferencingFile(e.plugin.urlForResourceNamed("icon.png").path())),t.setMessageText("Chose files to keep"),t.addButtonWithTitle("save"),t.addButtonWithTitle("cancel");var n=r.settingForKey("files")||[],i=30+30*n.length,a=NSView.alloc().initWithFrame(NSMakeRect(0,0,300,i));t.addAccessoryView(a);for(var o,l,s=n.length,c=[],u=0;u<s;u++)o=n[u],(l=NSButton.alloc().initWithFrame(NSMakeRect(0,i-38-20*u,300,20))).setButtonType(NSSwitchButton),l.setBezelStyle(0),l.setTitle("owner:".concat(o[0],", repo:").concat(o[1],", path:").concat(o[2])),l.setState(NSOnState),c.push(l),a.addSubview(l);if(1e3==t.runModal()){var d=[];console.log("###### keeping Files ######");for(u=0;u<s;u++)1==c[u].stringValue()&&d.push(n[u]);console.log(d),r.setSettingForKey("files",d)}};function c(e,t){var n=COSAlertWindow.new();n.setIcon(NSImage.alloc().initByReferencingFile(e.plugin.urlForResourceNamed("icon.png").path())),n.setMessageText(t),n.addButtonWithTitle("ok"),n.addButtonWithTitle("settings"),1001==n.runModal()&&u(e)}function u(e){return r.settingForKey("git-username")||o(e),a(e),!0}function d(e){return!!r.settingForKey("settings-exist")||u(e)}t.default=function(e){u(e)}},"sketch/settings":
/*!**********************************!*\
  !*** external "sketch/settings" ***!
  \**********************************/
/*! no static exports found */function(e,t){e.exports=require("sketch/settings")}});"default"===e&&"function"==typeof n?n(t):n[e](t)}that.onRun=__skpm_run.bind(this,"default");